language: python
sudo: false
dist: bionic
cache:
  directories:
  - $HOME/.cache/pip
env:
  global:
  - SPHINXINTL_TRANSIFEX_USERNAME=api
  - SPHINXINTL_TRANSIFEX_PROJECT_NAME=getfem-53-1
  - secure: "FAA/tP/UJW4s6McgKJkFJnRz3SLdKUuixAT3gc+60alauI8awhHwPDf/Oe1QkoAXkUzOnr/RR9RUAysBaZ5rG4Rhh5kIJcAX+b30/4k6XXRWih7skSyrznyUBlCB/YfEIip8lV5U+GpL7RVEWwB/LOWPiKcMV729lNm25xxbWchlU2XcXd2/gj0DBF4FfKB/A8vQZTpIZkvE8+Ignr99h3Ye/exSr65ymKI2e53RXeKhGnU63Wi78Nh4bm8UTgdnxXaQt1xaDRQyQl4x0tgNKNMycvGncRBeJQ8l/k9HfavMqDt59NC0qUcDRboM1yOe7L20jfWBkb6h3VBsn4JBYUCJCiuG1vZaUda1KdxqizNq7oP8UlTkF73WxjNDK4Y+3P9esZVE3qIoNi4nDC+JMg/EUCabCiS2SYLbQbaPqz3GUO9CbcdX+ZiZr35N66g5cIqD24dDAVKHTW6zTDjtpvGuJWWS60UUfm4VBWSTL5dJAoT74F5GtdgnmQqywYEjcaFB6e/7GNY7KYJU8KQKZDUy+HdRtcub9Y+wrseCmBsvjPgwMShtPCPeK16cVxS39sOUhLuNtDKa/suH+2eW6P50JsfVpJOxeetraSR4wxtn9M6wuCPlds6sFuga829WYUYMREDiC1kr6D6dbB8C5go8w3WXRdMTQTRfUkRGTc8="
before_install:
- openssl aes-256-cbc -K $encrypted_a10c131499f7_key -iv $encrypted_a10c131499f7_iv -in .secrets/key.enc -out ~/.ssh/id_rsa -d
- chmod 600 ~/.ssh/id_rsa
- echo -e "Host github.com\n\tStrictHostKeyChecking no\n" >> ~/.ssh/config
- sudo apt-get install -y --no-install-recommends automake
- sudo apt-get install -y --no-install-recommends libtool
- sudo apt-get install -y --no-install-recommends make
- sudo apt-get install -y --no-install-recommends g++
- sudo apt-get install -y --no-install-recommends libqd-dev
- sudo apt-get install -y --no-install-recommends libqhull-dev
- sudo apt-get install -y --no-install-recommends libmumps-seq-dev
- sudo apt-get install -y --no-install-recommends liblapack-dev
- sudo apt-get install -y --no-install-recommends libopenblas-dev
- sudo apt-get install -y --no-install-recommends libpython3-dev
- sudo apt-get install -y --no-install-recommends ufraw
- sudo apt-get install -y --no-install-recommends imagemagick
- sudo apt-get install -y --no-install-recommends fig2dev
- sudo apt-get install -y --no-install-recommends texlive
- sudo apt-get install -y --no-install-recommends xzdec
- sudo apt-get install -y --no-install-recommends fig2ps
- sudo apt-get install -y --no-install-recommends gv
- sudo apt-get install -y --no-install-recommends transifex-client
addons:
  apt:
    update: true
install:
- pip install -U pip setuptools
- pip install -r ./requirements.txt
script:
- cd doc/sphinx
- (cat .tx/config;
   tx push -s --skip;
   rm -rf source/locale/ja;
   tx pull -l ja)
after_success:
